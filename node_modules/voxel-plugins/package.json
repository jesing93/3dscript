{
  "name": "voxel-plugins",
  "description": "dynamically load plugins for voxel-engine",
  "version": "0.5.0",
  "main": "plugins.js",
  "repository": {
    "type": "git",
    "url": "git@github.com:voxel/voxel-plugins.git"
  },
  "keywords": [
    "voxel",
    "plugins",
    "voxel-plugins"
  ],
  "dependencies": {
    "inherits": "^2.0.1",
    "tsort": "0.0.1"
  },
  "devDependencies": {
    "tape": "^4.4.0"
  },
  "scripts": {
    "test": "node test.js"
  },
  "license": "MIT",
  "readme": "# voxel-plugins\n\nAn API for loading and enabling plugins in voxel.js with support for soft dependencies.\n\nFor a list of available plugins, see [the wiki](https://github.com/voxel/voxel-plugins/wiki).\n\n[![Build Status](https://travis-ci.org/voxel/voxel-plugins.png)](https://travis-ci.org/voxel/voxel-plugins)\n\n## Loading plugins\n\nFirst construct the plugin system:\n\n    var createPlugins = require('voxel-plugins');\n    var plugins = createPlugins(game, {require:require});\n\nYou can now add as many plugins as you want, as follows:\n\n    plugins.add('foo', {});\n\ngiving the plugin name and an options object. The name should be `require()`-able module, and\nthe options are plugin-specific. Adding plugins will perform the require,\nexamine the optional pluginInfo for dependency ordering, build up the loading graph, and save the\noptions, but not yet instantiate the plugin objects.\n\nOnce plugins are added, they can all be loaded (in the proper order,\nuses [tsort](https://github.com/eknkc/tsort) with the optional dependency info) by calling `loadAll()`:\n\n    plugins.loadAll();\n\nAt any time, plugins can be disabled and re-enabled (they start out enabled at load),\nas long as they implement a simple API (see next section):\n\n    plugins.enable('foo');\n    plugins.disable('foo');\n    plugins.toggle('foo')\n    var flag = plugins.isEnabled('foo');\n\nand the plugins can be queried like so:\n\n    console.log(plugins.list());\n    var pluginInstance = plugins.get('foo');\n\n\n## Plugin development\n\n### Construction\n\nTo write a plugin supported by this API all you need to do is make an NPM module, and have it accept (game, opts) then return a new object:\n\n    module.exports = function(game, opts) {\n      return new Foo(game, opts)\n    }\n\n    function Foo(game, opts) {\n        // initialization and setup here\n        // game is the voxel-engine instance, opts is an optional {} for configuration\n    }\n\nThat's it. Many voxel.js addon modules already support this convention. As long as they do, voxel-plugins will be able to load them.\n\n### Enabling and disabling\n\nvoxel-plugins supports dynamically enabling/disabling plugins, if the individual plugin supports it.\nTo support it, just implement enable() and disable() methods, and call enable() in your constructor:\n\n    function Foo(game, opts) {\n        // initialization and setup here\n\n        // must call enable() in your constructor\n        this.enable();\n    }\n\n    Foo.prototype.enable = function() {\n        // enable your plugin, making changes to the gameplay as needed\n    }\n\n    Foo.prototype.disable = function() {\n        // disable your plugin, returning the game to a state as if it was never enabled\n    }\n\nIn enable() you register event handlers, in disable() remove them, and so on. Implementing enable/disable\nsupport allows your plugin to be enabled and disabled using [voxel-plugins-ui](https://github.com/voxel/voxel-plugins-ui),\nor otherwise.\n\n### Soft dependencies & load order\n\nOften it is useful to call into another plugin instance during initialization, but in order \nfor this to work the other plugin must be loaded before yours. To do this, set the `pluginInfo` property\non the exported object to contain the `loadAfter` property with a list of plugins to load first, for example\n(from [voxel-workbench](https://github.com/voxel/voxel-workbench)):\n\n    module.exports.pluginInfo = {\n        loadAfter: ['voxel-registry', 'craftingrecipes']\n    }\n\nSince the above plugins will be loaded first, you can now safely execute `game.plugins.get('voxel-registry')`\n(etc.) in your constructor or `enable()` method.\n\nvoxel-plugins performs a topological sort to determine the correct load order. For a more\ncomplex dependency tree, check out\n[voxel-reach](https://github.com/voxel/voxel-reach),\n[voxel-mine](https://github.com/voxel/voxel-mine),\n[voxel-use](https://github.com/voxel/voxel-use), and\n[voxel-harvest](https://github.com/voxel/voxel-harvest).\n\n### Adding game content\n\nvoxel-plugins only handles loading and enabling/disabling plugins. \n\nTo implement the actual functionality of your plugin (modifying the game, etc.), you \ncan use the voxel-engine APIs (instance passed in the `game` parameter), or other plugin APIs.\nvoxel-plugins itself is available in `game.plugins` and can be used to lookup other plugins\nfor this purpose. See also [voxel-registry](https://github.com/voxel/voxel-registry).\n\n\n\n## License\n\nMIT\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/voxel/voxel-plugins/issues"
  },
  "_id": "voxel-plugins@0.5.0",
  "_from": "voxel-plugins@0.5.0"
}
